# 签名 与 Token

参考：

- [Token与签名区别分析](https://www.jianshu.com/p/805161f036c8)
- [一文彻底搞懂加密、数字签名和数字证书](https://segmentfault.com/a/1190000024523772)


## Token

在网站、app与服务器交互的过程中，很多时候需要：

1. 标示客户端的请求是否合法，是否已经登录；
2. 避免用户多次输入密码，实现自动登陆；
3. 避免在终端直接存储用户的密码。

**Token验证流程**

基于以上需求，我们就引入了token机制，Token的验证流程通常如下：

1. 客户端通过用户名、密码请求登录；

2. 服务端接收到客户端请求后，对用户名与密码进行验证；

3. 验证成功后，服务端会签发一个 Token，这个Token是与用户名一一对应的，Token一般可以存储在缓存（Redis）或数据库中，以方便后面查询出来进行验证。再把这个 Token 发送给客户端

    ```java
    //如下表示将token保存一个月
    redisTemplateUtil.setExpire(RedisPrefixConstants.ADMIN_LOGIN_USERKEY + userKey, userToken +"**",30 *24 *3600);
    ```

4. 客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里；

5. 客户端每次向服务端请求资源的时候需要带着服务端签发的 Token；

6. 服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据；

7. Token存在过期时间，在Token生成的时候可以打上一个时间戳，验证token的同时验证是否过期，并告知终端。终端接收到token过期的返回后，则要求用户重新输入用户名跟密码，进行登录；

8. 用户的一些操作需要从新请求服务端下发token，如退出、修改密码后重新登录。


## 签名与验签

* 私钥：可以解密公钥加密的数据

* 公钥：可以解密私钥加密的数据

也就是说公钥和私钥之间可以互相加解密

- 公钥加密私钥解密称之为——加解密

- 私钥加密公钥解密称之为——签名验签

签名：使用私钥对数据进行加密，该操作称之为——签名

验签：使用与私钥对应的公钥进行解密，该操作称之为——验签



## 注解定义

## JWT